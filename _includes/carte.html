{% if {{include.id}} %}

<div class="card" data-id="{{include.id}}">
  <div class=content>
    <div class="header">
      <div class=title></div>
      <div class=types>
        <span class=primary_types></span>
      </div>
    </div>
    <div class=illu><img></img></div>
    <div class=rules>
      <template id="rule-template">
        <div class="rule">
          <div class="rule_text"></div>
        </div>
      </template>
    </div>
    <div class="footer">
    <span class="id"></span><span>BattleFight · Test · 2025</span>
    </div>
  </div>
</div>

{% else %}

{% assign edition = include.e | default: 'I' %}
{% assign version = include.v | default: 'alpha' %}
{% assign number = include.n %}

{% assign edition_obj = site.data.editions | find: 'id', edition | first %}
{% assign version_obj = edition_obj.versions | find: 'id', version | first %}
{% assign cards = site.data[version_obj.cards] %}

{% assign card = cards | where: 'ID', number | first %}

{% assign title = card.TITLE | strip %}
{% assign type = card.TYPE | strip %}
{% assign illu_src = version_obj.illu-dir | append: number | append: '.jpg' %}
{% assign steps_classes = card.STEPS | strip %}

<div class="card"
  data-title="{{title}}"
  data-type="{{type}}"
  data-edition="{{edition}}"
  data-number="{{number}}"
  data-version="{{version}}"
  >
  <div class=content>
    <div class="header">
      <div class=title>{{title}}</div>
      <div class=types>
        <span class=primary_types>{{type}}</span>
      </div>
    </div>
    <div class=illu><img src="{{illu_src}}"></div>
    <div class=rules>
      {% assign steps_size_minus = steps_classes.size | minus: 1}
      {% for i in (0..steps_size_minus) %}
      {% assign step_class = steps_classes | slice: i %}
      {% assign step_text_column = i | plus: 1 | prepend: 'STEP' %}
      {% assign step_text = card[step_text_column] %}
      {% include step.html class=step_class text=step_text %}
      {% endfor %}
  </div>
    <div class="footer">
    <span class="id">{{edition}} ({{version}}) {{number}}</span><span>BattleFight 2025</span>
    </div>
  </div>
</div>

{% endif %}
