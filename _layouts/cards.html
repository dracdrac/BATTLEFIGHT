<!doctype html>
<html lang="fr">
<head>
 {% include head.html %}
  <script src="/assets/js/cards-browser.js"></script>
  <link rel="stylesheet" href="{{ '/assets/css/print-cards.css?v=' | append: site.github.build_revision | relative_url }}"/>
</head>
<body>
 {% include header.html %}
  <main>
    <header>
      {% include breadcrumbs.html %}
      <h1 id="page-title">{{ page.title }}</h1>
      <p id="page-description">{{ page.description }}</p>
    </header>
    <article>
      {% if page.excerpt %}
    <section id="page-excerpt">
      {{ page.excerpt }}
    </section>
      {% endif %}
    <section id="page-content">
      {{ content }}
    </section>
    </article>

    <aside class="tool-menu" id="cards-browser">
      {% assign edition = page.cards_edition | default: site.default_edition %}
      {% assign edition_obj = site.data.editions | find: 'id', edition | first %}
      {% assign version = page.cards_version | default: edition_obj.current-version %}
      {% assign version_obj = edition_obj.versions | find: 'id', version | first %}
      {% assign treatment = page.cards_treatment | default: site.default_treatment %}
      <form action="#" onsubmit="return false;">
        <button type="submit" disabled style="display: none" aria-hidden="true"></button>
        <fieldset>
            <legend>Chercher</legend>
          <input placeholder="Entre le texte à chercher" name="filter-string" id="filter-string"/>
      <label for="search-in">dans : </label><select name="search-in" id="search-in">
            <option value=".content" selected>Toute la carte</option>
           <option value=".title">Le titre</option>
           <option value=".steps">Les étapes</option>
           <option value=".id">L'identifiant</option>
        </select>
        </fieldset>
        <fieldset>
        <legend>Options</legend>
      <label for="treatment">Traitement : </label><select name="treatment" id="cards-treatments">
        {% for t in version_obj.treatments %}
          <option value="{{t.id}}" {% if t.id == treatment %}selected{% endif %}>{{t.id}} ({{t.name}})</option>
        {% endfor %}

      </select>
                  <label for="size">Taille : </label><select name="size" id="cards-sizes">
            <option value="S">Petit</option>
           <option value="M" selected>Moyen</option>
           <option value="L">Grand</option>
        </select>
        </fieldset>
        <fieldset>
        <legend>Actions</legend>
      <button id="print-cards">Imprimer</button>
        </fieldset>
      </form>
    </aside>
      <div class="cards">
    {% for i in (0..99) %}
    {% assign n = i | prepend: '00' | slice: -2, 2 %}
    <div class="card-container">{% include card.html e=page.cards_edition v=page.cards_version n=n %}</div>
    {% endfor %}
    </div>

    <!-- Templates for js card creation -->
    <template id="card-template"><div class="card-container">{% include card.html blank=true %}</div></template>
    <template id="step-template">{% include step.html blank=true %}</template>
  </main>


  {% include footer.html %}
</body>
</html>
